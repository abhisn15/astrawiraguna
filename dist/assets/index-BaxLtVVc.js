const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/decorations-cbpMDndK.js","assets/vendor-D2Rcybzd.js"])))=>i.map(i=>d[i]);
import{u as Z,d as Se,e as we,r as a,P as Re,V as N,f as ee,h as Pe,g as y,j as n,R as Ie,i as te,E as ae,k as $,_ as je,l as xe,M as pe,m as Ke,n as L,C as Te,O as Fe,H as Ce,o as ye,p as He,q as me,S as ze}from"./vendor-D2Rcybzd.js";const Oe=Ie.lazy(()=>je(()=>import("./decorations-cbpMDndK.js"),__vite__mapDeps([0,1]))),ne=()=>a.useMemo(()=>typeof window>"u"?!1:/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent),[]),he={viewportResolution:{mobile:.8,desktop:2}},l={mainVerticalPole:"PAPAN_PENYANGGA_NAMA",horizontalBeam:"PAPAN_ATAS",signs:[{key:"osis",boardName:"OSIS",textName:"OSIS_Text",path:"/organisasi/osis"},{key:"rpl",boardName:"RPL",textName:"RPL_Text",path:"/jurusan/rpl"},{key:"dkv",boardName:"PAPAN_DKV",textName:"DKV_TXT",path:"/jurusan/dkv"},{key:"mp",boardName:"PAPAN_MP",textName:"MP_TXT",path:"/jurusan/mp"},{key:"ak",boardName:"AK",textName:"AK_Text",path:"/jurusan/ak"},{key:"br",boardName:"PAPAN_BR",textName:"BR_TXT",path:"/jurusan/br"}],interactiveMeshes:[{key:"piala",meshName:"Piala",path:"/prestasi",hoverScaleFactor:1.15},{key:"instagram",meshName:"Instagram",path:"https://www.instagram.com/astrawiraguna25",hoverScaleFactor:1.2},{key:"piano001",meshName:"Piano001",hoverScaleFactor:1.01,isPiano:!0},{key:"piano",hoverScaleFactor:1,meshName:"Piano"}],fansGroup1:["KIPAS","KIPAS001","KIPAS002"],fansGroup2:["KIPAS003","KIPAS004"],clock:{face:"JAM_DINDING",hourHand:"JARUM_JAM",minuteHand:"JARUM_MENIT",secondHand:"JARUM_DETIK"},kursi:"Chair_Top",lights:["BOHLAM","BOHLAM002","BOHLAM003","BOHLAM004","BOHLAM005","BOHLAM006","BOHLAM007","BOHLAM008","BOHLAM009","Lamp"]},Be=({node:t,delay:h,visible:r,overshootFactor:w=1.15,path:A})=>{const v=ne(),C=xe(),S=a.useRef(),E=a.useMemo(()=>(t==null?void 0:t.userData.initialScale)||new N(1,1,1),[t]),p=a.useMemo(()=>(t==null?void 0:t.userData.initialRotation)||new ae,[t]),H=p.y,c=H+Math.PI/2,T=v?1.05:1.15,{scale:I,rotation:g}=ee({overshootFactor:T,from:{scale:[E.x,.001,E.z],rotation:[p.x,c,p.z]},to:async i=>{r&&(t!=null&&t.userData.wasFound)?(await i({scale:[E.x,E.y,E.z],rotation:[p.x,H,p.z],config:{...$.wobbly,duration:400}}),await i({scale:[E.x*w,E.y*w,E.z*w],config:{...$.wobbly,duration:150,mass:.7}}),await i({scale:E.toArray(),config:{...$.gentle,duration:250}})):!r&&(t!=null&&t.userData.wasFound)&&await i({scale:[E.x,.001,E.z],rotation:[p.x,c,p.z],config:$.gentle,immediate:!0})},delay:h,config:$.stiff});a.useEffect(()=>{const i=S.current;return()=>{i&&i.scale&&y.killTweensOf(i.scale),document.body.style.cursor="default"}},[]);const x=i=>{v||(i.stopPropagation(),document.body.style.cursor="pointer",S.current&&(t!=null&&t.userData.wasFound)&&r&&y.to(S.current.scale,{x:E.x*1.2,y:E.y*1.2,z:E.z*1.2,duration:.3,ease:"power1.out"}))},R=()=>{if(document.body.style.cursor="default",S.current&&(t!=null&&t.userData.wasFound)){const i=I.get();y.to(S.current.scale,{x:i[0]/(r?w:1),y:i[1]/(r?w:1),z:i[2]/(r?w:1),duration:.3,ease:"power1.out"})}},D=i=>{i.stopPropagation(),A?A.startsWith("http")?window.open(A,"_blank","noopener,noreferrer"):C(A):console.warn("No path defined for this sign:",t==null?void 0:t.name)};return t!=null&&t.userData.wasFound?n.jsx(te.primitive,{ref:S,object:t,scale:I,rotation:g,onPointerOver:x,onPointerOut:R,onClick:D}):null},Le=({node:t,path:h,visible:r,delay:w,hoverScaleFactor:A=1.1,isPiano:v=!1,meshKey:C,pianoSoundsRef:S,pianoKeyMap:E,fadeOutBackgroundMusic:p,fadeInBackgroundMusic:H})=>{const c=ne(),{gl:T}=Z(),I=xe(),g=a.useRef(),[x,R]=a.useState(!1),[D,i]=a.useState(!1),j=a.useRef(null),F=a.useRef(null),[V,U]=a.useState(0),u=a.useMemo(()=>(t==null?void 0:t.userData.initialScale)||new N(1,1,1),[t]),G=a.useMemo(()=>(t==null?void 0:t.userData.initialRotation)||new ae,[t]),m=a.useMemo(()=>(t==null?void 0:t.userData.initialPosition)||new N(0,0,0),[t]);a.useEffect(()=>{const k=g.current;return k&&(y.set(k.scale,{x:.001,y:.001,z:.001}),y.set(k.rotation,{x:G.x,y:G.y,z:G.z}),y.set(k.position,{x:m.x,y:m.y,z:m.z}),r&&(t!=null&&t.userData.wasFound)&&y.to(k.scale,{x:u.x,y:u.y,z:u.z,duration:.6,delay:w/1e3,ease:"back.out(1.7)"})),()=>{k&&(y.killTweensOf(k.scale),y.killTweensOf(k.position)),document.body.style.cursor="default",F.current&&clearTimeout(F.current)}},[t,r,w,u,G,m]);const W=k=>{k.stopPropagation(),!x&&(i(!0),document.body.style.cursor="pointer",g.current&&(t!=null&&t.userData.wasFound)&&r&&y.to(g.current.scale,{x:u.x*A,y:u.y*A,z:u.z*A,duration:.3,ease:"power1.out"}))},z=()=>{x||(i(!1),document.body.style.cursor="default",g.current&&(t!=null&&t.userData.wasFound)&&y.to(g.current.scale,{x:u.x,y:u.y,z:u.z,duration:.3,ease:"power1.out"}))},b=k=>{if(c&&(k.stopPropagation(),k.touches&&k.touches[0]),k.stopPropagation(),v&&(t!=null&&t.userData.wasFound)&&!x){console.log(`Piano "${t.name}" (key: ${C}) diklik.`),R(!0),y.timeline({onComplete:()=>{R(!1),D?y.to(g.current.scale,{x:u.x*A,y:u.y*A,z:u.z*A,duration:.2,ease:"power1.out"}):y.to(g.current.scale,{x:u.x,y:u.y,z:u.z,duration:.2,ease:"power1.out"})}}).to(g.current.position,{y:m.y-.03,duration:.1,ease:"power1.in"}).to(g.current.position,{y:m.y,duration:.3,ease:"bounce.out"});const Y=`Key_${V+1}`,X=S.current[Y];return X?(Object.values(S.current).filter(O=>!O.paused).forEach(O=>{O.pause(),O.currentTime=0}),X.play(),p(),j.current=Date.now(),U(O=>O>=23?0:O+1),F.current&&clearTimeout(F.current),F.current=setTimeout(()=>{Date.now()-j.current>=1e3&&H()},1e3),null):(console.warn(`Suara untuk ${Y} tidak ditemukan.`),null)}else return h?(h.startsWith("http")?window.open(h,"_blank","noopener,noreferrer"):I(h),null):(console.warn("No path/action defined for this interactive mesh:",t==null?void 0:t.name),null)};return!(t!=null&&t.userData.wasFound)||!r?null:n.jsx("primitive",{ref:g,object:t,onPointerOver:W,onPointerOut:z,onClick:b})},Ge=({node:t,isReadyToAnimate:h})=>{const r=a.useMemo(()=>(t==null?void 0:t.userData.initialRotation)||new ae,[t]),w=a.useMemo(()=>(t==null?void 0:t.userData.initialPosition)||new N,[t]),A=a.useMemo(()=>(t==null?void 0:t.userData.initialScale)||new N(1,1,1),[t]),[v,C]=a.useState(0),S={tension:100,friction:60},{rotationY:E}=ee({key:v,from:{rotationY:r.y},to:async p=>{h&&(t!=null&&t.userData.wasFound)&&(await p({rotationY:r.y+pe.degToRad(60),config:{...S,duration:2e3}}),await p({rotationY:r.y+pe.degToRad(50),config:{...S,duration:1e3}}),await p({rotationY:r.y,config:{...S,duration:1500}}))},immediate:!h||!(t!=null&&t.userData.wasFound)});return a.useEffect(()=>{let p;return h&&(t!=null&&t.userData.wasFound)&&(p=setInterval(()=>C(T=>T+1),5e3)),()=>clearInterval(p)},[h,t]),t!=null&&t.userData.wasFound?n.jsx(te.primitive,{object:t,"rotation-y":E,position:w,scale:A,"rotation-x":r.x,"rotation-z":r.z}):null},Ne=({pianoSoundsRef:t,pianoKeyMap:h,isNightMode:r,fadeOutBackgroundMusic:w,fadeInBackgroundMusic:A,onPianoPress:v,startIntroAnimation:C})=>{var ue,ce,le,fe,de;const S=ne(),{gl:E,size:p}=Z(),H=Se(),{scene:c,nodes:T}=we("/assets/models/Room.gltf"),I=a.useRef({}),g=a.useRef({face:null,hourHand:null,minuteHand:null,secondHand:null});a.useEffect(()=>{const e=S?he.viewportResolution.mobile:he.viewportResolution.desktop;E.setPixelRatio(Math.min(window.devicePixelRatio,e*window.devicePixelRatio))},[E,S]);const x=a.useRef(!0),R=a.useRef([]),D=(e,s=!1,o=!1,M=c)=>{let f=T[e]||M.getObjectByName(e);if(f)f.userData.initialPosition=f.position.clone(),f.userData.initialRotation=f.rotation.clone(),f.userData.initialScale=f.scale.clone(),f.userData.wasFound=!0,f.visible=o,f.material&&!f.material.userData?f.material.userData={}:Array.isArray(f.material)&&f.material.forEach(P=>{P.userData||(P.userData={})});else return window[`warned_missing_node_${e}`]||(console.warn(`PERINGATAN: Node "${e}" TIDAK DITEMUKAN.`),window[`warned_missing_node_${e}`]=!0),{name:e,userData:{wasFound:!1,initialPosition:new N,initialRotation:new ae,initialScale:new N(1,1,1)},visible:!1};return f};v&&v();const i=a.useMemo(()=>{const e={mainVerticalPole:null,horizontalBeam:null,signs:{},fans:{},chairTop:null,interactiveMeshes:{},lights:{}};if(c&&T){e.horizontalBeam=D(l.horizontalBeam,!1,!1),e.mainVerticalPole=D(l.mainVerticalPole,!1,!1),l.signs.forEach(o=>{const M=D(o.boardName,!1,!1),f=T[o.textName]||c.getObjectByName(o.textName);f&&f.userData.wasFound&&(f.visible=!1),e.signs[o.key]={board:M,text:f}}),l.interactiveMeshes.forEach(o=>{const M=D(o.meshName,!1,!1);e.interactiveMeshes[o.key]=M}),[...l.fansGroup1,...l.fansGroup2].forEach(o=>{const M=D(o,!0,!0);e.fans[o]=M,M!=null&&M.userData.wasFound&&(I.current[o]=M)}),l.lights.forEach(o=>{e.lights[o]=D(o,!1,!0)}),e.chairTop=D(l.kursi,!1,!1);const s=D(l.clock.face,!1,!0);s&&s.userData.wasFound?(g.current.face=s,g.current.hourHand=D(l.clock.hourHand,!0,!0,s),g.current.minuteHand=D(l.clock.minuteHand,!0,!0,s),g.current.secondHand=D(l.clock.secondHand,!0,!0,s)):window.warned_missing_clock_face||(console.error(`Node jam "${l.clock.face}" tidak ditemukan.`),window.warned_missing_clock_face=!0)}return e},[c,T]);a.useEffect(()=>(c&&i.lights&&(R.current.forEach(e=>{e.pointLight&&(c.remove(e.pointLight),e.pointLight.dispose())}),R.current=[],l.lights.forEach(e=>{var o,M;const s=i.lights[e];if(s&&((o=s.userData)!=null&&o.wasFound)&&s.isMesh){const K=new Re(16769203,0,7,2),J=new N;s.getWorldPosition(J),K.position.copy(J),c.add(K),r&&(Array.isArray(s.material)?s.material:[s.material]).forEach(B=>{B.userData.originalEmissiveIntensity===void 0&&(B.userData.originalEmissiveIntensity=B.emissiveIntensity,B.userData.originalEmissiveColorHex=B.emissive.getHex(),B.userData.originalToneMapped=B.toneMapped)}),R.current.push({meshName:e,meshNode:s,pointLight:K})}else!s||!((M=s.userData)!=null&&M.wasFound)||s&&s.isMesh})),()=>{R.current.forEach(e=>{e.pointLight&&(c==null||c.remove(e.pointLight),e.pointLight.dispose())}),R.current=[]}),[c,i.lights,r]),a.useEffect(()=>{if(!c||R.current.length===0||R.current.length===0)return;if(x.current){x.current=!1;return}const e=2.5,s=16769203;R.current.forEach(o=>{const{meshNode:M,pointLight:f}=o;if(M&&M.isMesh&&M.material&&f){const P=M.material,_=d=>{d.userData.originalEmissiveColorHex===void 0&&(d.userData.originalEmissiveColorHex=d.emissive.getHex()),d.userData.originalEmissiveIntensity===void 0&&(d.userData.originalEmissiveIntensity=d.emissiveIntensity),d.userData.originalToneMapped===void 0&&(d.userData.originalToneMapped=d.toneMapped),y.to(d,{emissiveIntensity:r?e:0,duration:.6,ease:"sine.inOut",onStart:()=>{r&&(d.emissive.setHex(s),d.toneMapped=!1,y.to(f,{duration:.6,ease:"sine.inOut"}))},onComplete:()=>{r||(d.emissive.setHex(d.userData.originalEmissiveColorHex),d.toneMapped=d.userData.originalToneMapped,y.to(f,{intensity:1,duration:.6,ease:"sine.inOut"})),d.needsUpdate=!0}})};Array.isArray(P)?P.forEach(_):_(P)}})},[r]);const[j,F]=a.useState(!1);a.useEffect(()=>{const s=setTimeout(()=>{var o,M,f;F(!0),(o=i.horizontalBeam)!=null&&o.userData.wasFound&&(i.horizontalBeam.visible=!0),(M=i.mainVerticalPole)!=null&&M.userData.wasFound&&(i.mainVerticalPole.visible=!0),l.signs.forEach(P=>{var d;const _=i.signs[P.key];(d=_==null?void 0:_.board)!=null&&d.userData.wasFound&&(_.board.visible=!0,_.text&&_.text.userData.wasFound&&(_.text.visible=!0))}),l.interactiveMeshes.forEach(P=>{const _=i.interactiveMeshes[P.key];_!=null&&_.userData.wasFound&&(_.visible=!0)}),(f=i.chairTop)!=null&&f.userData.wasFound&&(i.chairTop.visible=!0),l.lights.forEach(P=>{var _;(_=i.lights[P])!=null&&_.userData.wasFound&&(i.lights[P].visible=!0)})},250);return()=>clearTimeout(s)},[i]);const V=500,U=0,u=i.horizontalBeam,{scale:G}=ee({from:{scale:u!=null&&u.userData.wasFound?[.001,u.userData.initialScale.y,u.userData.initialScale.z]:[.001,1,1]},to:{scale:u!=null&&u.userData.wasFound?u.userData.initialScale.toArray():[1,1,1]},config:{...$.gentle,duration:V},delay:U,immediate:!j||!(u!=null&&u.userData.wasFound),reset:!j&&(u==null?void 0:u.userData.wasFound)}),m=i.mainVerticalPole,{scale:W}=ee({from:{scale:m!=null&&m.userData.wasFound?[m.userData.initialScale.x,.001,m.userData.initialScale.z]:[1,.001,1]},to:{scale:m!=null&&m.userData.wasFound?m.userData.initialScale.toArray():[1,1,1]},config:{...$.gentle,duration:V},delay:U+100,immediate:!j||!(m!=null&&m.userData.wasFound),reset:!j&&(m==null?void 0:m.userData.wasFound)}),z=U+V+50,b=150,k=a.useMemo(()=>l.signs.map((e,s)=>{var o;return{key:e.key,node:(o=i.signs[e.key])==null?void 0:o.board,delay:z+s*b,path:e.path}}),[i.signs,z,b]),q=z+l.signs.length*b+100,Y=250,X=a.useMemo(()=>l.interactiveMeshes.map((e,s)=>({key:e.key,node:i.interactiveMeshes[e.key],path:e.path,delay:q+s*Y,hoverScaleFactor:e.hoverScaleFactor,isPiano:e.isPiano||!1})),[i.interactiveMeshes,q,Y]),O=q+l.interactiveMeshes.length*Y+200,[De,ve]=a.useState(!1);a.useEffect(()=>{if(j){const e=setTimeout(()=>ve(!0),O);return()=>clearTimeout(e)}},[j,O]),Pe((e,s)=>{const o=S?1.2:2;l.fansGroup1.forEach(d=>{var K;(K=I.current[d])!=null&&K.userData.wasFound&&I.current[d].rotateY(o*s)}),l.fansGroup2.forEach(d=>{var K;(K=I.current[d])!=null&&K.userData.wasFound&&I.current[d].rotateY(o*s)});const{face:M,hourHand:f,minuteHand:P,secondHand:_}=g.current;if(M&&f&&P&&_){const d=new Date;let K=d.getHours()+2.8;const J=d.getMinutes()+13.8,ie=d.getSeconds()+26.5,B=d.getMilliseconds();K>=12&&(K=K%12);const _e=(K%12*30+J*.5)*(Math.PI/180),Ee=(J*6+ie*.1)*(Math.PI/180),Ae=(ie*6+B*.006)*(Math.PI/180);f.rotation&&f.rotation.set(0,-_e,0),P.rotation&&P.rotation.set(0,-Ee,0),_.rotation&&_.rotation.set(0,-Ae,0)}});const be=!S||H.tier>1,[ke,oe]=a.useState(!1);a.useEffect(()=>{let e=window.requestIdleCallback?requestIdleCallback(()=>oe(!0)):setTimeout(()=>oe(!0),500);return()=>{window.cancelIdleCallback?cancelIdleCallback(e):clearTimeout(e)}},[]);const Me=a.useMemo(()=>{var s;const e=new Set;return e.add(l.horizontalBeam),e.add(l.mainVerticalPole),l.signs.forEach(o=>{o.boardName&&e.add(o.boardName)}),(s=i.chairTop)!=null&&s.userData.wasFound&&e.add(l.kursi),l.interactiveMeshes.forEach(o=>{o.meshName&&e.add(o.meshName)}),e},[i.chairTop]);return a.useEffect(()=>()=>{c&&(c.traverse(e=>{e.isMesh&&(e.geometry&&e.geometry.dispose(),e.material&&(Array.isArray(e.material)?e.material.forEach(s=>{s.map&&s.map.dispose(),s.dispose()}):(e.material.map&&e.material.map.dispose(),e.material.dispose())))}),R.current.forEach(e=>{e.pointLight&&(e.pointLight.parent&&e.pointLight.parent.remove(e.pointLight),e.pointLight.dispose())}),R.current=[]),y.globalTimeline.getChildren().forEach(e=>e.kill())},[c]),n.jsxs("group",{dispose:null,children:[be&&ke&&n.jsx(a.Suspense,{fallback:null,children:n.jsx(Oe,{scene:c,gpuTier:H,isNightMode:r})}),c&&c.children.filter(e=>!(Me.has(e.name)||l.fansGroup1.includes(e.name)||l.fansGroup2.includes(e.name)||e.name===l.clock.face||l.lights.includes(e.name))).map(e=>n.jsx("primitive",{object:e.clone(!0)},e.uuid)),((ue=g.current.face)==null?void 0:ue.userData.wasFound)&&n.jsxs("primitive",{object:g.current.face,children:[((ce=g.current.hourHand)==null?void 0:ce.userData.wasFound)&&n.jsx("primitive",{object:g.current.hourHand}),((le=g.current.minuteHand)==null?void 0:le.userData.wasFound)&&n.jsx("primitive",{object:g.current.minuteHand}),((fe=g.current.secondHand)==null?void 0:fe.userData.wasFound)&&n.jsx("primitive",{object:g.current.secondHand})]}),(u==null?void 0:u.userData.wasFound)&&n.jsx(te.primitive,{object:u,scale:G,position:u.userData.initialPosition,rotation:u.userData.initialRotation}),(m==null?void 0:m.userData.wasFound)&&n.jsx(te.primitive,{object:m,scale:W,position:m.userData.initialPosition,rotation:m.userData.initialRotation}),k.map(e=>n.jsx(Be,{node:e.node,delay:e.delay,visible:j,overshootFactor:1.15,path:e.path},e.key)),l.fansGroup1.map(e=>{var s,o;return((o=(s=i.fans)==null?void 0:s[e])==null?void 0:o.userData.wasFound)&&n.jsx("primitive",{object:i.fans[e]},i.fans[e].uuid)}),l.fansGroup2.map(e=>{var s,o;return((o=(s=i.fans)==null?void 0:s[e])==null?void 0:o.userData.wasFound)&&n.jsx("primitive",{object:i.fans[e]},i.fans[e].uuid)}),l.lights.map(e=>{var s,o;return((o=(s=i.lights)==null?void 0:s[e])==null?void 0:o.userData.wasFound)&&n.jsx("primitive",{object:i.lights[e]},i.lights[e].uuid)}),X.map(e=>n.jsx(Le,{node:e.node,path:e.path,visible:j,delay:e.delay,hoverScaleFactor:e.hoverScaleFactor,isPiano:e.isPiano,meshKey:e.key,pianoSoundsRef:e.isPiano?t:void 0,pianoKeyMap:e.isPiano?h:void 0,fadeOutBackgroundMusic:w,fadeInBackgroundMusic:A},e.key)),((de=i.chairTop)==null?void 0:de.userData.wasFound)&&n.jsx(Ge,{node:i.chairTop,isReadyToAnimate:De})]})};we.preload("/assets/models/Room.gltf");y.registerPlugin(ze);const Ve=()=>a.useMemo(()=>typeof window>"u"?!1:/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent),[]);function Ue({isNightMode:t}){const h=ye(me,"/assets/env/day.hdr"),r=ye(me,"/assets/env/night.hdr"),w=t?r:h;return w.mapping=Z.EquirectangularReflectionMapping,w.encoding=Z.RGBEEncoding,n.jsx(He,{background:!0,files:t?"/assets/env/night.hdr":"/assets/env/day.hdr",path:"",backgroundIntensity:1,ground:{height:5,radius:30,scale:100}})}const re=({title:t,children:h,isOpen:r,onClose:w,id:A})=>{const v=a.useRef();a.useEffect(()=>{r&&(y.set(v.current,{opacity:0,scale:0}),y.to(v.current,{opacity:1,scale:1,duration:.5,ease:"back.out(2)"}))},[r]);const C=()=>{y.to(v.current,{opacity:0,scale:0,duration:.5,ease:"back.in(2)",onComplete:w})};return!r&&(!v.current||v.current.style.opacity==="0")?null:n.jsxs("div",{ref:v,className:`modal ${A}`,style:{display:r?"block":"none",position:"fixed",zIndex:1002,top:"50%",left:"50%",transform:"translate(-50%, -50%)",background:"white",padding:"20px",borderRadius:"8px",boxShadow:"0 5px 15px rgba(0,0,0,0.3)"},children:[n.jsx("h2",{children:t}),h,n.jsx("button",{onClick:C,className:"modal-exit-button",style:{position:"absolute",top:"10px",right:"10px"},children:"X"})]})},$e=({isOpen:t,onClick:h})=>{const r=a.useRef();return a.useEffect(()=>{t?(y.set(r.current,{opacity:0,display:"block"}),y.to(r.current,{opacity:1,duration:.5})):r.current&&r.current.style.opacity!=="0"&&y.to(r.current,{opacity:0,duration:.5,onComplete:()=>{r.current&&(r.current.style.display="none")}})},[t]),!t&&(!r.current||r.current.style.opacity==="0")?null:n.jsx("div",{ref:r,className:"overlay",style:{display:t?"block":"none",position:"fixed",top:0,left:0,width:"100%",height:"100%",background:"rgba(0,0,0,0.5)",zIndex:1001},onClick:h})},Ye=({onEnter:t,isLoadingComplete:h,progress:r})=>{const w=a.useRef();a.useEffect(()=>{h&&w.current&&y.to(w.current,{borderColor:"#2a0f4e",backgroundColor:"#401d49",color:"#e6dede",boxShadow:"rgba(0, 0, 0, 0.24) 0px 3px 8px",cursor:"pointer",duration:.3})},[h]);const A=()=>{h&&y.to(w.current,{scale:1.3,duration:.4,ease:"cubic-bezier(0.34, 1.56, 0.64, 1)"})},v=()=>{h&&y.to(w.current,{scale:1,duration:.4,ease:"cubic-bezier(0.34, 1.56, 0.64, 1)"})};return n.jsx("div",{style:{width:"100%",height:"100%",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",background:"#ead7ef",color:"#401d49"},children:n.jsx("button",{ref:w,onClick:h?t:void 0,onMouseEnter:A,onMouseLeave:v,style:{padding:"15px 30px",fontSize:"1.5rem",borderRadius:"8px",border:"8px solid #6e5e9c",background:"#ead7ef",color:"#6e5e9c",transition:"none"},children:h?"Enter!":`Loading... ${Math.round(r)}%`})})},We={C1_Key:"Key_24","C#1_Key":"Key_23",D1_Key:"Key_22","D#1_Key":"Key_21",E1_Key:"Key_20",F1_Key:"Key_19","F#1_Key":"Key_18",G1_Key:"Key_17","G#1_Key":"Key_16",A1_Key:"Key_15","A#1_Key":"Key_14",B1_Key:"Key_13",C2_Key:"Key_12","C#2_Key":"Key_11",D2_Key:"Key_10","D#2_Key":"Key_9",E2_Key:"Key_8",F2_Key:"Key_7","F#2_Key":"Key_6",G2_Key:"Key_5","G#2_Key":"Key_4",A2_Key:"Key_3","A#2_Key":"Key_2",B2_Key:"Key_1"},Q=.5,se=.05,ge=500,qe=()=>{const t=a.useRef();a.useRef();const h=a.useRef(),r=a.useRef(),[w,A]=a.useState(!1),[v,C]=a.useState(!1),[S,E]=a.useState(!1),[p,H]=a.useState(!1),[c,T]=a.useState(!1),[I,g]=a.useState(null),x=a.useRef(null),R=a.useRef({}),D=a.useRef({}),[i,j]=a.useState(!1),{progress:F}=Ke(),V=Ve();a.useEffect(()=>{x.current=new L.Howl({src:["/assets/audio/music/cjr_terhebat.ogg"],loop:!0,volume:Q,html5:!0});for(let b=1;b<=24;b++){const k=`Key_${b}`;R.current[k]=new L.Howl({src:[`/assets/audio/sfx/piano/Key_${b}.ogg`],preload:!0,volume:1})}return D.current.click=new L.Howl({src:["/assets/audio/sfx/click/bubble.ogg"],preload:!0,volume:1}),L.Howler.mute(p),()=>{x.current&&x.current.unload(),Object.values(R.current).forEach(b=>b.unload()),D.current.click&&D.current.click.unload()}},[]),a.useEffect(()=>{if(L.Howler.mute(p),x.current){const b=p?0:i?se:Q;(x.current.playing()||!p)&&x.current.volume(b),p&&x.current.playing()||!p&&!x.current.playing()&&v&&x.current.play()}},[p,i,v]);const U=()=>{!i&&x.current&&x.current.playing()&&(x.current.fade(p?0:Q,p?0:se,ge),j(!0))},u=()=>{i&&x.current&&(x.current.fade(p?0:se,p?0:Q,ge),j(!1))};a.useEffect(()=>{if(F===100){const b=setTimeout(()=>A(!0),500);return()=>clearTimeout(b)}},[F]);const G=()=>{!w||v||(C(!0),D.current.click&&D.current.click.play(),L.Howler.ctx&&L.Howler.ctx.state&&L.Howler.ctx.state==="suspended"&&L.Howler.ctx.resume(),x.current&&!x.current.playing()&&x.current.play(),y.timeline({onComplete:()=>{r.current&&(r.current.style.display="none"),E(!0)}}).to(r.current.querySelector("button"),{cursor:"default",border:"8px solid #6e5e9c",background:"#ead7ef",color:"#6e5e9c",boxShadow:"none",innerHTML:"~ 안녕하세요 ~",duration:.1}).to(r.current,{background:"#ead7ef",duration:.1},"<").to(r.current,{scale:.5,duration:1.2,delay:.25,ease:"back.in(1.8)"}).to(r.current,{y:"200vh",transform:"perspective(1000px) rotateX(45deg) rotateY(-35deg)",duration:1.2,ease:"back.in(1.8)"},"-=0.1"))},m=b=>{b.preventDefault(),D.current.click&&D.current.click.play(),H(k=>!k),y.to(b.currentTarget,{rotate:p?0:-30,scale:1.1,duration:.2,yoyo:!0,repeat:1,ease:"power1.inOut"})},W=b=>{b.preventDefault(),D.current.click&&D.current.click.play(),T(k=>!k),y.to(b.currentTarget,{rotate:c?0:30,scale:1.1,duration:.2,yoyo:!0,repeat:1,ease:"power1.inOut"})},z=()=>{g(null),u()};return a.useLayoutEffect(()=>{},[]),n.jsxs("section",{ref:t,className:"relative",children:[!v&&n.jsx("div",{ref:r,style:{position:"fixed",top:0,left:0,width:"100vw",height:"100vh",zIndex:2e3,background:"#ead7ef"},children:n.jsx(Ye,{onEnter:G,isLoadingComplete:w,progress:F})}),v&&n.jsxs("div",{style:{position:"fixed",top:"20px",right:"20px",zIndex:1010,display:"flex",gap:"10px"},children:[n.jsx("button",{onClick:m,className:"mute-toggle-button",style:{padding:"10px 15px",background:c?"#333":"#fff",color:c?"#fff":"#333",border:`2px solid ${c?"#555":"#ccc"}`,borderRadius:"50%",width:"50px",height:"50px",display:"flex",justifyContent:"center",alignItems:"center",cursor:"pointer",boxShadow:"0 2px 5px rgba(0,0,0,0.2)"},children:p?"UNMUTE":"MUTE"}),n.jsx("button",{onClick:W,className:"theme-toggle-button",style:{padding:"10px 15px",background:c?"#333":"#fff",color:c?"#fff":"#333",border:`2px solid ${c?"#555":"#ccc"}`,borderRadius:"50%",width:"50px",height:"50px",display:"flex",justifyContent:"center",alignItems:"center",cursor:"pointer",boxShadow:"0 2px 5px rgba(0,0,0,0.2)"},children:c?"DAY":"NIGHT"})]}),n.jsx($e,{isOpen:!!I,onClick:z}),n.jsx(re,{title:"Work Experience",isOpen:I==="work",onClose:z,id:"work-modal",children:n.jsx("p",{children:"Detail pengalaman kerja di sini..."})}),n.jsx(re,{title:"About Me",isOpen:I==="about",onClose:z,id:"about-modal",children:n.jsx("p",{children:"Informasi tentang saya..."})}),n.jsx(re,{title:"Contact",isOpen:I==="contact",onClose:z,id:"contact-modal",children:n.jsx("p",{children:"Cara menghubungi saya..."})}),n.jsx("div",{ref:h,className:"relative w-full h-screen overflow-hidden",children:n.jsx(Te,{shadows:!1,dpr:V?.7:2,gl:{antialias:!1,powerPreference:"high-performance",preserveDrawingBuffer:!1,failIfMajorPerformanceCaveat:!0,majorVersion:1,minorVersion:0},camera:{fov:35,near:.1,far:200,position:typeof window<"u"&&window.innerWidth<768?[29.56,14.01,31.37]:[17.49,9.1,17.85]},style:{background:c?"#1a111f":"#D9CAD1"},onCreated:({gl:b})=>{b.setPixelRatio(Math.min(window.devicePixelRatio,2))},children:n.jsxs(a.Suspense,{fallback:n.jsx(Ce,{center:!0,children:n.jsx("p",{style:{color:c?"white":"black"},children:"Initializing 3D Experience..."})}),children:[n.jsx(Ne,{isNightMode:c,pianoSoundsRef:R,pianoKeyMap:We,startIntroAnimation:S,fadeOutBackgroundMusic:U,fadeInBackgroundMusic:u}),n.jsx(Fe,{enableDamping:!0,dampingFactor:.05,minDistance:5,maxDistance:45,minPolarAngle:0,maxPolarAngle:Math.PI/2,minAzimuthAngle:0,maxAzimuthAngle:Math.PI/2,target:window.innerWidth<768?[-.082,3.311,-.743]:[.462,1.971,-.83],enabled:!I}),n.jsx(Ue,{isNightMode:c})]})})})]})};export{qe as default};
